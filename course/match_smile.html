<html>

<head>
    <title>Matching Game</title>
    <style>
        img {
            position: absolute;
        }
        
        div {
            position: absolute;
            width: 500px;
            height: 500px;
        }
        
        #rightSide {
            left: 500px;
            border-left: 1px solid black
        }
    </style>
</head>

<body>

    <h1><a href="https://www.coursera.org/learn/html-css-javascript/peer/dwdxh/matching-game"> Matching Smile Game</a></h1>
    <nav>Click on the extra smiling face on the left.</nav>

    <main>
        <div id="leftSide"></div>
        <div id="rightSide"></div>
    </main>
    <script>
        var number_of_face = 4;
        var theLeftSide = document.getElementById('leftSide');
        var theRightSide = document.getElementById('rightSide');

        function generateFaces() {
            var smile_img;
            for (var i = 0; i < number_of_face; i++) {
                smile_img = document.createElement('img');
                smile_img.src = "smile.png";
                var top_position = Math.floor(Math.random() * 400) + 'px';
                var left_position = Math.floor(Math.random() * 400) + 'px';
                smile_img.style.top = top_position;
                smile_img.style.left = left_position;

                theLeftSide.appendChild(smile_img);
            }
            var leftSideImages = theLeftSide.cloneNode(true);
            leftSideImages.removeChild(leftSideImages.lastChild);
            theRightSide.appendChild(leftSideImages);
        }

        generateFaces();
        //Add an event handler function to the extra face
        function nextLevel(event) {
            //  function nextLevel(event) {
            event.stopPropagation();
            number_of_face += 2;
            while (theLeftSide.firstChild) {
                theLeftSide.removeChild(theLeftSide.firstChild);
            }
            while (theRightSide.firstChild) {
                theRightSide.removeChild(theRightSide.firstChild);
            }
            generateFaces2();
        }
        theLeftSide.lastChild.addEventListener('click', nextLevel);

        function generateFaces2() {
            generateFaces();
            theLeftSide.lastChild.addEventListener('click', nextLevel);
        }

        var theMain = document.getElementsByTagName('main')[0];
        //Game over
        theMain.onclick = function gameOver() {
            alert('Game over!');
            theMain.onclick = null;
            theLeftSide.lastChild.onclick = null;
        }
    </script>
</body>

</html>